# 🌙 智能主题切换系统

本网站现已支持基于时间的智能主题切换系统，参考了 [ip.ll.sd](https://ip.ll.sd/) 网站的设计理念，并加入了现代化的用户体验。

## ✨ 功能特点

### ⏰ 智能时间切换
- **白天模式**：早上 6:00 - 晚上 18:00
- **夜间模式**：晚上 18:00 - 早上 6:00
- 基于用户本地时间自动切换
- **手动切换**：侧边栏的主题按钮支持一键切换
- **智能记忆**：手动选择后2小时内保持用户偏好

### 🎨 现代主题设计

#### 白天主题（优化版）
- **背景色**：温暖的米色 (#f4f1ec)
- **文字色**：深色 (#000000)
- **卡片背景**：半透明白色，增强层次感
- **边角圆润**：12px 圆角，现代化设计
- **柔和阴影**：多层次阴影效果

#### 夜间主题（全新设计）
- **背景渐变**：深邃的渐变背景 (#1e1e2e → #2a2a3a → #1a1a28)
- **文字色**：柔和的蓝白色 (#cdd6f4)
- **卡片背景**：半透明深色，毛玻璃效果
- **高亮色**：温暖的粉色 (#f38ba8)
- **护眼设计**：减少蓝光，适合夜间阅读

### ✨ 视觉优化

- **平滑过渡**：所有颜色变化都有 0.4 秒的平滑动画
- **毛玻璃效果**：夜间模式使用 backdrop-filter 增强层次感
- **智能图片**：夜间模式下图片亮度自动调节
- **现代圆角**：卡片和按钮使用更大的圆角（12-16px）
- **深度阴影**：多层次阴影营造立体感
- **移动端优化**：针对移动设备的特殊样式优化
- **浏览器主题色**：自动更新移动端浏览器状态栏颜色

### 🎛️ 手动控制

#### 主题切换按钮
- **位置**：位于侧边栏导航区域底部
- **外观**：太阳/月亮图标 + "主题" 文字
- **动画**：图标旋转和缩放切换效果
- **响应式**：桌面端和移动端都完美适配

#### 用户偏好记忆
- **智能覆盖**：手动选择主题后，2小时内不会自动切换
- **本地存储**：使用 localStorage 保存用户选择
- **无缝切换**：刷新页面后保持用户选择的主题

## 技术实现

### 核心原理
1. **CSS 变量系统**：使用 CSS 自定义属性实现主题切换
2. **JavaScript 检测**：定期检查本地时间并应用相应主题
3. **无闪烁加载**：在页面加载前就设置正确的主题

### 关键代码
```css
[data-theme="night"] {
  --background-color: #0d1117;
  --foreground-color: #e6edf3;
  /* 更多夜间主题变量... */
}
```

```javascript
// 自动检测时间并切换主题
const hour = new Date().getHours();
const isNight = hour < 6 || hour >= 18;
const theme = isNight ? 'night' : 'day';
document.body.setAttribute('data-theme', theme);
```

## 用户体验

### 自动特性
- ✅ 页面加载时立即应用正确主题
- ✅ 每分钟检查时间，自动切换
- ✅ 切换标签页回来时重新检查
- ✅ 所有页面保持一致的主题

### 性能优化
- ✅ 无需额外的 CSS 文件加载
- ✅ 基于 CSS 变量的高效切换
- ✅ 最小化 JavaScript 执行频率

## 兼容性

- ✅ 支持所有现代浏览器
- ✅ 移动端和桌面端完全兼容
- ✅ 优雅降级，不影响基本功能

## 扩展功能

系统已预留接口，未来可以添加：
- 🔄 手动主题切换按钮
- 💾 用户偏好设置保存
- 🌍 基于地理位置的日出日落时间
- 🎨 更多主题选项

## 文件说明

主要修改的文件：
- `src/assets/style.css` - 夜间主题 CSS 变量和样式
- `src/layouts/base.astro` - 集成主题切换器
- `src/assets/global.css` - 动画优化

## 测试建议

为了测试主题切换功能，可以：
1. 修改系统时间到 18:00 之后查看夜间模式
2. 在浏览器开发者工具中手动执行：
   ```javascript
   window.themeSwitcher.setTheme('night') // 切换到夜间
   window.themeSwitcher.setTheme('day')   // 切换到白天
   ```

---

*这个功能让网站不再"素"，而是智能地适应用户的使用时间，提供更舒适的阅读体验。* 